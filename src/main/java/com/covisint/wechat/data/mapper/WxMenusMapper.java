package com.covisint.wechat.data.mapper;

import java.util.Map;

public class WxMenusMapper {
	/**
	 * 系统菜单
	 * 
	 * @param paramMap
	 * @return
	 */
	public static String getSysMenu(Map<String, Object> paramMap) {
		String sql = "SELECT * FROM (SELECT DISTINCT WM.MENU_ID   AS MENU_ID, WM.MENU_NAME AS MENU_NAME, NULL         AS MENU_URL, WM.MENU_DESC AS MENU_DESC, NULL         AS PARENT_ID, WM.MENU_SORT, NULL         AS RESOURCE_SORT FROM WX_MENUS WM INNER JOIN WX_MENUS_RESOURCES WMR ON WMR.MENU_ID = WM.MENU_ID INNER JOIN WX_RESOURCES WR ON WR.RESOURCE_ID = WMR.RESOURCE_ID INNER JOIN WX_ROLE_RESOURCE WRR ON WRR.RESOURCE_ID = WR.RESOURCE_ID INNER JOIN WX_USER_ROLES WUR ON WUR.ROLE_ID = WRR.ROLE_ID WHERE WUR.ROLE_TYPE = :roleType AND WR.ENABLED = :enable AND WUR.STATUS = :status ORDER BY WM.MENU_SORT) UNION ALL SELECT * FROM (SELECT DISTINCT WR.RESOURCE_ID    AS MENU_ID, WR.RESOURCE_NAME  AS MENU_NAME, WR.RESOURCE_PATH  AS MENU_URL, WR.RESOURCE_DESC  AS MENU_DESC, WM.MENU_ID        AS PARENT_ID, WM.MENU_SORT, WMR.RESOURCE_SORT FROM WX_MENUS WM INNER JOIN WX_MENUS_RESOURCES WMR ON WMR.MENU_ID = WM.MENU_ID INNER JOIN WX_RESOURCES WR ON WR.RESOURCE_ID = WMR.RESOURCE_ID INNER JOIN WX_ROLE_RESOURCE WRR ON WRR.RESOURCE_ID = WR.RESOURCE_ID INNER JOIN WX_USER_ROLES WUR ON WUR.ROLE_ID = WRR.ROLE_ID WHERE WUR.ROLE_TYPE = :roleType AND WR.ENABLED = :enable AND WUR.STATUS = :status ORDER BY WM.MENU_SORT, WMR.RESOURCE_SORT) ";
		return sql;
	}

	/**
	 * 用户菜单
	 */
	public static String getUsrMenu(Map<String, Object> paramMap) {
		String sql = "SELECT * FROM (SELECT DISTINCT WM.MENU_ID   AS MENU_ID, WM.MENU_NAME AS MENU_NAME, NULL         AS MENU_URL, WM.MENU_DESC AS MENU_DESC, NULL         AS PARENT_ID, WM.MENU_SORT, NULL         AS RESOURCE_SORT FROM WX_MENUS WM INNER JOIN WX_MENUS_RESOURCES WMR ON WMR.MENU_ID = WM.MENU_ID INNER JOIN WX_RESOURCES WR ON WR.RESOURCE_ID = WMR.RESOURCE_ID INNER JOIN WX_ROLE_RESOURCE WRR ON WRR.RESOURCE_ID = WR.RESOURCE_ID INNER JOIN WX_USER_ROLES WUR ON WUR.ROLE_ID = WRR.ROLE_ID INNER JOIN WX_USER_BELONG_ROLES WUBR ON WUBR.ROLE_ID = WUR.ROLE_ID WHERE WUR.ROLE_TYPE = :roleType AND WR.ENABLED = :enable AND WUR.STATUS = :status AND WUBR.USER_ID = :userId AND WUBR.ACCOUNT_ID = :accountId ORDER BY WM.MENU_SORT) UNION ALL SELECT * FROM (SELECT DISTINCT WR.RESOURCE_ID    AS MENU_ID, WR.RESOURCE_NAME  AS MENU_NAME, WR.RESOURCE_PATH  AS MENU_URL, WR.RESOURCE_DESC  AS MENU_DESC, WM.MENU_ID        AS PARENT_ID, WM.MENU_SORT, WMR.RESOURCE_SORT FROM WX_MENUS WM INNER JOIN WX_MENUS_RESOURCES WMR ON WMR.MENU_ID = WM.MENU_ID INNER JOIN WX_RESOURCES WR ON WR.RESOURCE_ID = WMR.RESOURCE_ID INNER JOIN WX_ROLE_RESOURCE WRR ON WRR.RESOURCE_ID = WR.RESOURCE_ID INNER JOIN WX_USER_ROLES WUR ON WUR.ROLE_ID = WRR.ROLE_ID INNER JOIN WX_USER_BELONG_ROLES WUBR ON WUBR.ROLE_ID = WUR.ROLE_ID WHERE WUR.ROLE_TYPE = :roleType AND WR.ENABLED = :enable AND WUR.STATUS = :status AND WUBR.USER_ID = :userId AND WUBR.ACCOUNT_ID = :accountId ORDER BY WM.MENU_SORT, WMR.RESOURCE_SORT) ";
		return sql;
	}

	/**
	 * 所有系统菜单
	 * 
	 * @param paramMap
	 * @return
	 */
	public static String getAllMenu(Map<String, Object> paramMap) {
		String sql = "SELECT * FROM (SELECT DISTINCT WM.MENU_ID   AS MENU_ID, WM.MENU_NAME AS MENU_NAME, NULL         AS MENU_URL, WM.MENU_DESC AS MENU_DESC, NULL         AS PARENT_ID, WM.MENU_SORT, NULL         AS RESOURCE_SORT FROM WX_MENUS WM INNER JOIN WX_MENUS_RESOURCES WMR ON WMR.MENU_ID = WM.MENU_ID INNER JOIN WX_RESOURCES WR ON WR.RESOURCE_ID = WMR.RESOURCE_ID WHERE WR.ENABLED = :enable ORDER BY WM.MENU_SORT) UNION ALL SELECT * FROM (SELECT DISTINCT WR.RESOURCE_ID    AS MENU_ID, WR.RESOURCE_NAME  AS MENU_NAME, WR.RESOURCE_PATH  AS MENU_URL, WR.RESOURCE_DESC  AS MENU_DESC, WM.MENU_ID        AS PARENT_ID, WM.MENU_SORT, WMR.RESOURCE_SORT FROM WX_MENUS WM INNER JOIN WX_MENUS_RESOURCES WMR ON WMR.MENU_ID = WM.MENU_ID INNER JOIN WX_RESOURCES WR ON WR.RESOURCE_ID = WMR.RESOURCE_ID WHERE WR.ENABLED = :enable ORDER BY WM.MENU_SORT, WMR.RESOURCE_SORT) ";
		return sql;
	}

}